<div class="sm:absolute sm:inset-0 flex flex-col flex-auto min-w-0 bg-card dark:bg-transparent">
    <ng-container *ngIf="(item$ | async) as item">
        <!-- Header -->
        <div
            class="relative flex flex-col flex-0 py-8 px-6 md:px-8 border-b">
            <!-- Loader -->
            <div
                class="absolute inset-x-0 bottom-0"
                *ngIf="isLoading">
                <mat-progress-bar [mode]="'indeterminate'"></mat-progress-bar>
            </div>
                <div class="flex flex-row cursor-pointer w-fit" routerLink="../">
                    <mat-icon [svgIcon]="'heroicons_solid:arrow-left'"></mat-icon>
                    <div class="text-2xl font-extrabold tracking-tight ml-4">Quay lại</div>
                </div>
            

            <div class="mt-8 grid grid-cols-1 md:grid-cols-2">
                <div class="">
                    <div class="text-3xl font-extrabold tracking-tight">Đơn hàng #{{item.id}}</div>
                    <div class="mt-4 grid grid-cols-1 md:grid-cols-2">
                        <div>
                            <div class="flex flex-row h-18">
                                <div class="min-w-10 w-10 min-h-10 h-10 bg-[#F8903A] rounded-full flex items-center justify-center">
                                    <mat-icon [svgIcon]="'heroicons_solid:clock'" class="text-white"></mat-icon>
                                </div>
                                <div class="ml-3">
                                    <div class="text-[#8E8EA1] text-sm ">Ngày đặt hàng</div>
                                    <div class="text-lg font-semibold">{{item.createDate | date: 'dd/MM/yyyy'}}</div>
                                </div>
                            </div>
                            <div class="flex flex-row h-18">
                                <div class="min-w-10 w-10 min-h-10 h-10 bg-[#F8903A] rounded-full flex items-center justify-center">
                                    <mat-icon [svgIcon]="'heroicons_outline:user'" class="text-white"></mat-icon>
                                </div>
                                <div class="ml-3">
                                    <div class="text-[#8E8EA1] text-sm ">Phiếu giảm giá</div>
                                    <div class="text-lg font-semibold">{{item.voucherId ?? 'Không áp dụng'}}</div>
                                </div>
                            </div>
                        </div>
                        <div>
                            <div class="flex flex-row h-18">
                                <div class="min-w-10 w-10 min-h-10 h-10 bg-[#F8903A] rounded-full flex items-center justify-center">
                                    <mat-icon [svgIcon]="'heroicons_outline:user'" class="text-white"></mat-icon>
                                </div>
                                <div class="ml-3">
                                    <div class="text-[#8E8EA1] text-sm ">Giá trị đơn hàng</div>
                                    <div class="text-lg font-semibold">{{item.totalAmount | number: '1.0-0'}}  VNĐ</div>
                                </div>
                            </div>
                            <div class="flex flex-row h-18">
                                <div class="min-w-10 w-10 min-h-10 h-10 bg-[#F8903A] rounded-full flex items-center justify-center">
                                    <mat-icon [svgIcon]="'heroicons_outline:cash'" class="text-white"></mat-icon>
                                </div>
                                <div class="ml-3">
                                    <div class="text-[#8E8EA1] text-sm ">Số tiền đã đặt cọc</div>
                                    <div class="text-lg font-semibold">{{item.totalAmountRequest | number: '1.0-0'}}  VNĐ</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="">
                    <div class="text-3xl font-extrabold tracking-tight">Thông tin khách hàng</div>
                    <div class="mt-4 grid grid-cols-1 md:grid-cols-2">
                        <div>
                            <div class="flex flex-row h-18">
                                <div class="min-w-10 w-10 min-h-10 h-10 bg-[#F8903A] rounded-full flex items-center justify-center">
                                    <mat-icon [svgIcon]="'heroicons_solid:identification'" class="text-white"></mat-icon>
                                </div>
                                <div class="ml-3">
                                    <div class="text-[#8E8EA1] text-sm ">Tên khách hàng</div>
                                    <div class="text-lg font-semibold">{{item.fullname}}</div>
                                </div>
                            </div>
                            <div class="flex flex-row h-18">
                                <div class="min-w-10 w-10 min-h-10 h-10 bg-[#F8903A] rounded-full flex items-center justify-center">
                                    <mat-icon [svgIcon]="'heroicons_outline:map'" class="text-white"></mat-icon>
                                </div>
                                <div class="ml-3">
                                    <div class="text-[#8E8EA1] text-sm ">Địa chỉ</div>
                                    <div class="text-lg font-semibold">{{item.address}}</div>
                                </div>
                            </div>
                        </div>
                        <div>
                            <div class="flex flex-row h-18">
                                <div class="min-w-10 w-10 min-h-10 h-10 bg-[#F8903A] rounded-full flex items-center justify-center">
                                    <mat-icon [svgIcon]="'heroicons_solid:phone'" class="text-white"></mat-icon>
                                </div>
                                <div class="ml-3">
                                    <div class="text-[#8E8EA1] text-sm ">Số điện thoại</div>
                                    <div class="text-lg font-semibold">{{item.phone}}</div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div>
                        <div class="text-2xl font-extrabold tracking-tight">Ghi chú</div>
                        <div>{{item.description}}</div>
                    </div>
                </div>
            </div>

            <div class="text-4xl font-extrabold tracking-tight">Danh sách dịch vụ đặt</div>
        </div>

        <!-- Main -->
        <div class="flex flex-auto">
            <!-- Products list -->
            <div class="flex flex-col flex-auto">
                <ng-container *ngIf="(item.combo.comboServices) as comboServices">
                    <ng-container *ngIf="comboServices.length > 0; else noProducts">
                        <div class="grid">
                            <!-- Header -->
                            <div
                                class="order-detail-grid z-10 sticky top-0 grid gap-4 py-4 px-6 md:px-8 shadow text-md font-semibold text-secondary bg-gray-50 dark:bg-black dark:bg-opacity-5"
                                matSort
                                matSortDisableClear>
                                <div></div>
                                <div class="">Ngày thực hiện</div>
                                <div class="">Tên dịch vụ</div>
                                <div class="">Số lượng</div>
                                <div class="">Địa điểm</div>
                                <div class="">Giá tiền</div>
                                <div class="">Trạng thái</div>
                                <div></div>
                            </div>
    
                            <!-- Rows -->
                            <ng-container *ngIf="(item.combo.comboServices) as comboServices1">
                                <ng-container *ngFor="let comboService of comboServices1; trackBy: trackByFn">
                                    <div class="order-detail-grid grid items-center gap-4 py-3 px-6 md:px-8 border-b">
                                        <div></div>
                                        <div class="truncate">
                                            {{comboService.service.currentPrices.dateOfApply | date: 'dd/MM/yyyy'}}
                                        </div>
                                        <div class="truncate">
                                            {{comboService.service.name}}
                                        </div>
                                        <div class="truncate">
                                            {{comboService.service.quantity}}
                                        </div>
    
                                        <div class="truncate">
                                            No data
                                        </div>

                                        <div class="truncate">
                                            {{comboService.service.currentPrices.price | number: '1.0-0'}}  VNĐ
                                        </div>
    
                                        <div class="flex flex-row truncate">
                                            <ng-container *ngIf="item.status === 'ACTIVE'" class="flex flex-col justify-center content-center ">
                                                <mat-icon
                                                    class="text-green-400 icon-size-5"
                                                    [svgIcon]="'heroicons_solid:check'">
                                                </mat-icon>
                                                <span class="text-green-400">Đồng ý</span>
                                            </ng-container>
                                            <ng-container *ngIf="item.status !== 'ACTIVE'">
                                                <mat-icon
                                                    class="text-gray-400 icon-size-5"
                                                    [svgIcon]="'heroicons_solid:x'"></mat-icon>
                                                <span class="text-gray-400">Từ chối</span>
                                            </ng-container>
                                        </div>
    
                                        <div class="flex flex-row">
                                            <button
                                                class="min-w-10 min-h-7 h-7 px-2 leading-6 mr-2"
                                                mat-stroked-button
                                                routerLink="{{item.id}}"
                                                >
                                                <mat-icon
                                                    class="icon-size-5"
                                                    [svgIcon]="'heroicons_outline:pencil-alt'"></mat-icon>
                                            </button>
                                        </div>
                                    </div>
                                </ng-container>
                            </ng-container>
                        </div>
    
                        <!-- <mat-paginator
                            class="sm:absolute sm:inset-x-0 sm:bottom-0 border-b sm:border-t sm:border-b-0 z-10 bg-gray-50 dark:bg-transparent"
                            [ngClass]="{'pointer-events-none': isLoading}"
                            [length]="pagination.length"
                            [pageIndex]="pagination.page"
                            [pageSize]="pagination.size"
                            [pageSizeOptions]="[5, 10, 25, 100]"
                            [showFirstLastButtons]="true">
                        </mat-paginator> -->
                    </ng-container>
                </ng-container>
                <ng-template #noProducts>
                    <div class="p-8 sm:p-16 border-t text-4xl font-semibold tracking-tight text-center">
                        Không có dịch vụ đặt!
                    </div>
                </ng-template>
            </div>
        </div>
    </ng-container>
</div>
